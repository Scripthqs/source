# Vue基础知识

## Vue概述

Vue(Vue.js)是一套用于构建用户界面的渐进式框架。

渐进式：

- 可以使用Vue对一个项目的某一个页面进行搭建，对之前使用JQuery或者原生JS的页面进行重构。
- Vue全家桶：Core + Vue-router + Vuex

Vue的核心概念：数据驱动，避免手动操作DOM元素。可以让前端开发者有更多的时间关注数据的业务逻辑，而不是关心DOM是如何渲染的。

### 框架和库

框架

- 一套完整的解决方案。功能完善，但是对项目的侵入性较大，项目如果需要更换框架，则需要重新架构整个项目。
- Vue和React

库（插件）：

- 只是提供某个小功能。对项目的侵入性较小，如果某个库无法完成某些需求，可以很容易切换到其他库实现需求。
- jQuery

### Vue的特点和高级功能：（开发时再慢慢体会）

特点：

- 模板渲染
- 响应式的更新机制：数据变化后，视图自动刷新
- 渐进式框架
- 组件化、模块化
- 轻量，占用内存小

高级功能：

- 解耦试图和数据
- 可复用的组件
- 前端路由技术
- 状态管理
- 虚拟DOM

具备HTML、CSS、JavaScript基础即可学习Vue。

## Vue.js安装

Vue.js分为开发版本和生产版本。

- 直接CDN引入
  - 通过script标签属性src引入文件的**绝对路径**。
  - 用户在读取网页内容的时候，就会去CND服务器中下载所需的文件，而不是在你的服务器里捞。
- 直接在官网下载所需版本的文件
  - 将文件复制到项目文件夹
  - 通过script标签属性src引入文件的**相对路径**。
- 通过NPM安装
  - NPM是Node默认的模块管理器，是命令行下的一个软件，用来安装和管理Node模块。
  - NPM不需要单独安装，在默认安装Node的时候，会连带一起安装NPM。
  - `$ npm install vue`安装最新稳定版

### Vue.js介绍

- 以前使用的编程范式，称为命令式编程
- 使用Vue的编程范式，称为声明式编程。

使用构造函数的方式，传一个对象`{}`作为参数。

- `{}`包含`el`属性：该属性决定这个Vue对象挂载到哪个元素
- `{}`包含了`data`属性，该属性通常会存储一些数据
  - 这些数据可以自定义
  - 也可以是从服务器加载的
- `{}`包含了`methods`属性，该属性用于在Vue中定义新的方法

- `v-for`循环
- `v-on`监听事件
  - `v-on:click`可以写成`@click`
- Vue的实例中，如果想要获取data里的属性、methods里面的方法，可以通过this来访问。
- this指向的是Vue的实例对象。

### MVVM模式

- `Model`
  - 数据层
  - 可以是自已定义的数据，也可以来自于服务器在网络请求的数据
  - 可定义数据修改和操作的业务逻辑 对应JS对象
- `View`
  - 用户看到的视图层
  - 在前端开发中，通常就是DOM层
  - 主要作用是给用户展示各种信息
- `view Model`
  - 视图模型层
  - 是View和Model沟通的桥梁
  - 一方面实现了`Data Bindings`（数据绑定），将Model的改变实时的反应到View
  - 另一方面它实现了`DOM Listener`（DOM 监听），当DOM发生一些事件（点击、滚动、touch等）时，可以监听到，并在需要的情况下改变对应的Data。
  - 负责业务逻辑的处理（比如Ajax请求），对数据进行加工后交给视图展示 同步连接V和M的对象

### 计数器中的MVVM

- `h1、button`标签就是`View`，就是DOM
- `data`这个对象的属性值就是`Model`，就是我们抽离出来的obj
- `new Vue()`就是`View Model`，我们创建的Vue实例

工作流程：

- `View Model`通过`Data Bindings`让obj的数据实时在DOM中显示。
- View Model`通过`DOM Listener`来监听`methods`中的操作，来改变obj中的数据。

好处：

- Vue可以帮助我们完成Vue Model层任务，避免手动操作DOM元素，让前端开发者有更多的时间去关注数据的业务逻辑处理。

### 创建Vue实例传入的options

最基础的options

- el
  - 类型：string | HTMLElement
  - 决定之后的Vue实例会管理哪个DOM
- data
  - 类型：Object | Function（组件当中时，data必须是函数）
  - Vue实例对应的数据类型
- methods
  - 类型：{[key:string]:Function}
  - 定义属于Vue的一些方法，可以在其他地方调用，也可以在指令中调用
- Vue的生命周期函数(钩子)

生命周期指从诞生到消亡的整个过程。

- `new Vue`
- `hook`钩子，生命周期函数又称为钩子函数。

方法和函数的区别：

- 方法（method）：对象中的函数是方法。
- 函数（function）：函数是一个具体特定功能的对象。

### 代码规范

- `=`两边各一个空格
- 缩进2个空格可能比缩进4个空格更合理

## Vue的系统指令

### 插值表达式{{}}

- Mustache语法（也就是双大括号）
- 数据绑定最常见的形式就是使用双大括号的文本插值
- 插值处的内容都会自动更新
- `{{}}`之间可以使用表达式，比如复杂的3元表达式

### v-once

- 当加上这个指令时，不会随着数据改变自动更新

### v-html

- `v-html="msg"`可以将msg解析成html元素
- 使用v-html渲染数据可能会非常危险，因为它很容易导致XSS（跨站脚本）攻击
- 使用的时候请谨慎，能够使用{{}}或者v-text实现的不要使用v-html

### v-text

- `v-text="msg"`可以将一个变量的值渲染到指定的元素中
- `v-text`会覆盖元素中原本的内容
- `v-text`没有闪烁的问题，因为它是放在属性里的

### v-pre

- 将插值表达式原封不动的显示

### v-cloak

- `v-cloak`保持和元素实例的关联，直到结束编译自动消失
- 和CSS 规则一起用的时候，能够解决差值表达式闪烁的问题
- 即可以隐藏未编译的标签直到实例准备完毕）

````js
<style>
    [v-cloak]{
        display:none;
    }
</style>
````

## v-on事件绑定机制

- `v-on:click`绑定单击响应函数
- `v-on`可以简写为`@`
- click keydown keyup mousedown mouseover ...等事件

## v-bind属性绑定机制

### v-bind绑定基本属性

基本属性：`src`和`href`属性

- `v-bind`：动态绑定用于绑定属性
- `<img v-bind:src="img动态地址">`
- v-bind的属性值里，可以写合法的 js 表达式
- Vue语法糖：可以省略`v-bind`，只写`:`

### v-bind动态绑定`class`属性

动态绑定class的属性的两种方式：

- 对象语法：
  - 对象的语法含义是：class后面跟一个对象
  - `:class="{类名：boolean}"`
  - 该布尔值动态可以写成`data`的属性
  - 该class属性可以写成`methods`方法，注意属性值要写`this`
  - 调用methods方法时，需要加上`()`
- 数组语法：
  - 数组语法的含义是：在class后面跟一个数组
  - `:class="[]"`
  - 使用较少

对象语法和数组语法，都能够和普通的class类共存。

### v-bind动态绑定`style`属性

- 为什么要动态绑定样式？
  - 学习组件化开发时，组件封装好后是可以复用的。
- `:style="{key(属性名):value(属性值)}"
  - 属性名使用驼峰命名法或者下划线
  - 属性值不加引号表示变量
  - value值可以来自data中的属性
- 也分为对象语法和数组语法

## 计算属性

定义一个函数，return函数的返回值。

- 字符串拼接
- 返回函数的计算结果，计算属性的函数写在computed中
- 使用计算属性时是属性名，而不是调用函数的形式

### 计算属性的setter和getter

`computed`计算属性中，一般没有set方法，只有只读属性，所以其中一般都是简写的，所有调用