# 组件化开发

## 1 什么是组件化？

组件化开发指的是：根据**封装**的思想，**把页面上可复用的 UI 结构封装为组件**，从而方便项目的开发和维护。

将复杂问题拆分成多个可以处理的小问题，再将其放在整体中。

在开发中，将一个页面拆分成一个个小的、可复用的组件，每个组件完成属于自己这部分的独立功能，从而方便整个页面的管理和维护。

## 2 vue 中的组件化开发

**Vue中，所有的组件都继承自Vue类的原型。**

vue 是一个**支持组件化开发**的前端框架。

 vue 中规定：**组件的后缀名是 `.vue`**。App.vue 文件本质上就是一个 vue 的组件

## 3 vue 组件的三个组成部分

每个 .vue 组件都由 3 部分构成，分别是

1. template -> 组件的模板结构
2. script -> 组件的 JavaScript 行为
3. style -> 组件的样式

其中，每个组件中必须包含 template 模板结构，而 script 行为和 style 样式是可选的组成部分

## 4 `template`

vue 规定：每个组件对应的模板结构，需要定义到 `<template>`节点

- template 是 vue 提供的容器标签，只起到包裹性质的作用，它不会被渲染为真正的 DOM 元素
- template 中**只能包含唯一的根节点**，一般写在div中

```vue
<template>
  <div>
  </div>
</template>
```

## 5 `script`

开发者可以在` <script>`节点中封装组件的 JavaScript 业务逻辑

```vue
<script>
export default {
  name: '',
  data () {
    return {

    }
  },
  methods: {

  }
}
</script>
```

**vue 组件中的 data 必须是一个函数，不能直接指向一个数据对象。**

否则会导致多个组件实例共用同一份数据的问题。

如果组件中的data中的是一个对象，到时候创建的组件实例都会指向一个相同的对象。而组件不应该相互影响。

## 6 `style`

组件内的 `<style>`节点是可选的，开发者可以在`<style>` 节点中编写样式**美化当前组件的 UI 结构**。

默认情况下，**写在 .vue 组件中的样式会全局生效**，因此很容易造成**多个组件之间的样式冲突**问题。

导致组件之间样式冲突的根本原因是：

- 单页面应用程序中，所有组件的 DOM 结构，都是基于**唯一的 index.html** 页面进行呈现的
- 每个组件中的样式，都会影响**整个 index.html 页面**中的 DOM 元素

**解决样式冲突：**

1. 为每个组件分配**唯一的自定义属性**，在编写组件样式时，通过**属性选择器**来控制样式的作用域

2. **添加 `scoped`属性**
3. **/deep/ 样式穿透**

```
<style lang="less" scoped>

</style>
```

- 添加 lang="less" 属性，即可使用 less 语法编写组件的样式

- 添加 `scoped`属性，它的 CSS 只会应用到当前组件的元素上

如果给当前组件的 style 节点添加了 scoped 属性，则当前组件的样式对其子组件是不生效的。如果想让某些样式对子组件生效，可以使用 **/deep/ 深度选择器**

